{"name":"ETP (ESSArch tools producer)","tagline":"ESSArch Tools for Producer","body":"# ETP (ESSArch tools producer)\r\n\r\nSIP packaging and delivery tools for user producer.\r\n\r\n# Installation Guide\r\n\r\n## Prerequisites\r\n\r\nHardware configuration for server, network and storage architecture is not affected in this guide. Software configurations for server operating systems occur preferably before the installation of ESSArch begins. The installation is expected to be done as user 'root'.\r\n\r\n## Supported OS platforms\r\n\r\n| **OS** | **Version** |   |\r\n| --- | --- | --- |\r\n| CentOS | 5.5 (x86\\_64) |   |\r\n| CentOS | 6.4 (x86\\_64) | CentOS release 6.6 (Final) |\r\n| Redhat Enterprise Server | 5 (x86\\_64) |   |\r\n| SUSE Linux Enterprise Server | 10 (x86\\_64) |   |\r\n| SUSE Linux Enterprise Server | 11 (x86\\_64) SP3 |   |\r\n| Fedora | 11 (x86\\_64) |   |\r\n\r\n## OS Packages\r\n\r\nBefore installing ESSArch you need to verify that the following packages are installed on your platform\r\n\r\n| **Package** | **Minimum version** | **Note** | **Verified version** |\r\n| --- | --- | --- | --- |\r\n| kernel-devel | 2.6.x |   | kernel-devel-2.6.32-504.el6.x86\\_64 |\r\n| sysstat | 7.x |   | sysstat-9.0.4-27.el6.x86\\_64 |\r\n| make | 3.81-15 |   | make-3.81-20.el6.x86\\_64 |\r\n| patch | 2.6.1-1 |   | patch-2.6-6.el6.x86\\_64 |\r\n| erlang \\*\\* | R12B-5.8 |   | erlang-R14B-04.3.el6.x86\\_64 |\r\n| gcc | 4.1.2 |   | gcc-4.4.7-11.el6.x86\\_64 |\r\n| gcc-c++ | 4.1.2 |   | gcc-c++-4.4.7-11.el6.x86\\_64 |\r\n| ppenssl | 0.9.8 |   | openssl-1.0.1e-30.el6.x86\\_64 |\r\n| openssl-devel | 0.9.8 |   | openssl-devel-1.0.1e-30.el6.x86\\_64 |\r\n| openldap | 2.3.43 |   | openldap-2.4.39-8.el6.x86\\_64 |\r\n| openldap-devel | 2.3.43 |   | openldap-devel-2.4.39-8.el6.x86\\_64 |\r\n| mt-st | 0.9b |   | mt-st-1.1-5.el6.x86\\_64 |\r\n| mtx | 1.2.18 |   | mtx-1.3.12-5.el6.x86\\_64 |\r\n| sg3\\_utils | 1.25 |   | sg3\\_utils-1.28-6.el6.x86\\_64 |\r\n| sg3\\_utils-libs | 1.25 |   | sg3\\_utils-libs-1.28-6.el6.x86\\_64 |\r\n| sg3\\_utils-devel | 1.25 |   | sg3\\_utils-devel-1.28-6.el6.x86\\_64 |\r\n| mysql | 5.0.77 |   | mysql-5.1.73-3.el6\\_5.x86\\_64 |\r\n| mysql-server | 5.0.77 |   | mysql-server-5.1.73-3.el6\\_5.x86\\_64 |\r\n| mysql-devel | 5.0.77 |   | mysql-devel-5.1.73-3.el6\\_5.x86\\_64 |\r\n| mysql-libs | 5.0.77 |   | mysql-libs-5.1.73-3.el6\\_5.x86\\_64 |\r\n| gnutls | 1.4.1 |   | gnutls-2.8.5-14.el6\\_5.x86\\_64 |\r\n| readline | 5.1.3 |   | readline-6.0-4.el6.x86\\_64 |\r\n| readline-devel | 5.1.3 |   | readline-devel-6.0-4.el6.x86\\_64 |\r\n| unixODBC | 2.2.11 |   | unixODBC-2.2.14-14.el6.x86\\_64 |\r\n| unixODBC-devel | 2.2.11 |   | unixODBC-devel-2.2.14-14.el6.x86\\_64 |\r\n| freetds | 0.64 |   | freetds-0.91-2.el6.x86\\_64 |\r\n| freetds-devel | 0.64 |   | freetds-devel-0.91-2.el6.x86\\_64 |\r\n| pcre | 7.8 |   | pcre-7.8-6.el6.x86\\_64 |\r\n| pcre-devel | 7.8 |   | pcre-devel-7.8-6.el6.x86\\_64 |\r\n| lzo | 2.03-2 |   | lzo-2.03-3.1.el6\\_5.1.x86\\_64 |\r\n| lzo-devel | 2.03-2 |   | lzo-devel-2.03-3.1.el6\\_5.1.x86\\_64 |\r\n| xz | 4.999.9-0.1 |   | xz-4.999.9-0.5.beta.20091007git.el6.x86\\_64 |\r\n| bzip2-devel (libbz2-devel) | 1.0.5-5 |   | bzip2-devel-1.0.5-7.el6\\_0.x86\\_64 |\r\n| libffi-devel | 3.0.5-3.2 |   | libffi-devel.x86\\_64 0:3.0.5-3.2.el6 |\r\n| sqlite-devel | 3.6 |   | 3.6.20-1.el6.x86\\_64 |\r\n\r\n\\*\\* Centos require extra package: [epel-release](http://ftp.acc.umu.se/mirror/fedora/epel/6/i386/epel-release-6-8.noarch.rpm)\r\n\r\n## Prepare Environment\r\n\r\n### Create user and group\r\n\r\nDon't forget to create /home/arch\r\n\r\n    Please run the following command as user root.\r\n    # groupadd arch\r\n    # useradd -c \"ESSArch System Account\" -m -g arch arch\r\n\r\n### Set password for arch user\r\n\r\n    Please run the following command as user root.\r\n    # passwd arch\r\n    Changing password for user arch.\r\n    New UNIX password: password\r\n    Retype new UNIX password: password\r\n\r\n### Customize user environment for arch user\r\n\r\nAdd the following rows to /home/arch/.bash_profile:\r\n\r\n    ### ESSArch start\r\n    ##\r\n    export PATH=/ESSArch/pd/python/bin:$PATH:/usr/sbin\r\n    export LANG=en_US.UTF-8\r\n    export LD_LIBRARY_PATH=/ESSArch/pd/python/lib:/ESSArch/pd/libxslt/lib:/ESSArch/pd/libxml/lib:$LD_LIBRARY_PATH\r\n    export ETP=/ESSArch/pd/python/lib/python2.7/site-packages/ESSArch_TP\r\n    export PYTHONPATH=$ETP:/ESSArch/config\r\n    export DJANGO_SETTINGS_MODULE=config.settings\r\n    alias bin='cd /ESSArch/bin'\r\n    alias log='cd /ESSArch/log'\r\n    ##\r\n    ### ESSArch end\r\n\r\n### Create installation directory\r\n\r\n    Please run the following command as user root.\r\n    # mkdir /ESSArch\r\n    # chown -R arch:arch /ESSArch\r\n\r\n## Installation\r\n\r\n### ETP installation script\r\n\r\n    Change to user \"arch\" with the following command.\r\n    # su  arch\r\n\r\n    Download and extract ESSArch_TP_install tarfile.\r\n    [arch@server ~]$ wget http://xxx.xxx.xxx.xxx/ESSArch_TP_installer_xxxxxxxxxxxx.tar.gz\r\n    [arch@server ~]$ tar xvf ESSArch_TP_installer_xxxxxxxxxxxx.tar.gz\r\n    [arch@server ~]$ cd ESSArch_TP_installer\r\n    [arch@server ~]$ ./install\r\n    \r\n    The installation of ESSArch is now running and dependent on hardware configuration, the installation may take some time. To see details of the installation progress please start a new terminal window and run the following command.\r\n    [arch@server ~]$ tail f /ESSArch/install.log\r\n    \r\n    When installation is finished, search in the log file /ESSArch/install.log for any unexpected errors indicating failure of installation of any modules.\r\n\r\n### Installation of Advanced Message Queuing Protocol\r\n\r\nESSArch is designed to be AMQP (Advanced Message Queuing Protocol) independent. However the installation package is prepared for RabbitMQ and the following instructions assume that you use RabbitMQ.\r\n\r\nFollow the instructions below in order to install RabbitMQ required by ESSArch.\r\n\r\n    Please run the following commands as root user.\r\n    # rpm i /ESSArch/install/packages/rabbitmq-server.rpm\r\n    # chkconfig rabbitmq-server on\r\n    # service rabbitmq-server start\r\n\r\nIf startup failed and you see an error message in /var/log/rabbitmq/startup_log  after a minute or so like:\r\n\r\nERROR: epmd error for host \"yourhostname\": timeout (timed out)_\r\n\r\nThen you need to update your /etc/hosts file to add your hostname to the list of localhost:\r\n\r\n127.0.0.1    yourhostname\r\n\r\n## Configuring\r\n\r\n### Apache httpd configuration\r\n\r\n    Edit file /ESSArch/config/httpd-etp.conf and change the configuration entry for \"ServerName\" to same as the hostname of the ESSArch server.\r\n\r\n    For test purpose you can use the existing configuration for SSL certificate, but for production environment and for maximum security we recommend generating your own SSL certificate or if you have your own SSL trusted certificate install them in the apache httpd configuration.\r\n\r\n### ESSArch configuration\r\n\r\n    In /ESSArch/config you will find all the configuration files for ESSArch. The main configuration file for ESSArch WEB GUI is local_etp_settings.py.\r\n    \r\n    For ESSArch you will find the configuration in the local database tables. To change the configuration please login as admin user is ETP and select menu MANAGEMENT > Configuration\r\n\r\n## Database\r\n\r\nESSArch is designed to be RDBMS-independent. \r\n\r\n### Create default tables in database\r\n\r\n    Please run the following command as user: arch\r\n    [arch@server ~]$ python $ETP/manage.py migrate\r\n\r\n## Add default configuration data to database\r\n\r\nUse only this default configuration for test purpose, do not install this default configuration in production.\r\n\r\nFor production environment you should first make a copy of this configuration file and update for example site_profile, site_name. After you done all your updates you install it.\r\n\r\n    Please run the following command as user: arch\r\n    [arch@server ~]$ python $ETP/install/install_config_etp.py\r\n\r\n### For production/custom installation\r\n\r\n    [arch@server ~]$ cp $ETP/install/install_config_etp.py /home/arch/install_config_etp_custom.py\r\n\r\nUpdate /home/arch/install_config_etp_custom.py\r\n\r\nInstall configuration:\r\n    \r\n    [arch@server ~]$ python /home/arch/install_config_etp_custom.py\r\n\r\n## Add profile configuration data to database\r\n\r\n    Please run the following command as user: arch\r\n    [arch@server ~]$ python $ETP/install/install_SA_Profile_NO_etp.py\r\n\r\n## Enable automatic startup at system boot\r\n\r\n    Login as root user and set ETP path variable:\r\n    # export ETP=/ESSArch/pd/python/lib/python2.7/site-packages/ESSArch_TP\r\n\r\n### Enable workerprocess\r\n\r\n    Please run the following commands as root user.\r\n    # cp $ETP/extra/celeryd.sh /etc/init.d/celeryd\r\n    # chmod 744 /etc/init.d/celeryd\r\n    # chkconfig celeryd on\r\n    # cp $ETP/extra/celerybeat.sh /etc/init.d/celerybeat\r\n    # chmod 744 /etc/init.d/celerybeat\r\n    # chkconfig celerybeat on\r\n\r\n### Enable automatic startup of Apache HTTPD\r\n\r\n    Please run the following command as user root.\r\n    # cp $ETP/extra/httpd.sh /etc/init.d/httpd\r\n    # chmod 744 /etc/init.d/httpd\r\n    # chkconfig httpd on\r\n\r\n# Running the ETP Server\r\n\r\n## Start ETP server\r\n\r\nNote that a startup or shutdown of ETP should always be controlled.\r\n\r\n    Please run the following command as user root to start ETP.\r\n    # service celeryd start\r\n    # service celerybeat start\r\n    # service httpd start\r\n\r\n## Stop ETP server\r\n\r\n    Please run the following command as user root to stop ETP.\r\n    # service httpd stop\r\n    # service celeryd stop\r\n    # service celerybeat stop\r\n\r\n## Start ETP WEB interface\r\n\r\nStart your preferable web browser and connect to ETP Server name or IP address.\r\n\r\nURL: [https://xxxxxxxx](https://xxxxxxxx)\r\n\r\nBy default, for test purpose, the installation has configured the following users:\r\n\r\n| **Username** | **Password** | **Role/Permissions** |\r\n| --- | --- | --- |\r\n| usr1 | usr1 | prepare, create, submit |\r\n| admin | admin | admin |\r\n\r\n## Important files to backup\r\n\r\nImportant data in ESSArch to backup is the configuration, log files and database. All areas which are mounted from external file servers should be backed up.\r\n\r\nEverything in the file area /ESSArch should be backed up before and after configuration changes or changes in ESSArch system installation, for example when upgrading and software patches.\r\n\r\nAreas that need to be backed up to an external \"backup system\" daily is the following:\r\n\r\n- --/ESSArch/etp\r\n- --/ESSArch/backups_mysql\r\n- --/ESSArch/config\r\n- --/ESSArch/log\r\n- --/ESSArch/data\r\n\r\n##Events and log information\r\n\r\nDifferent types of events are logged both in physical files and tables in ESSArch database. Log entries are tagged with the log level - Debug, Critical, Error, Warning, Info. These log levels can be felt by the ETP's system logs:\r\n\r\n/ESSArch/log\r\n/ESSArch/log/celerybeat.log\r\n/ESSArch/log/celery_worker1.log\r\n/ESSArch/log/httpd_access.log\r\n/ESSArch/log/httpd_error.log\r\n/ESSArch/log/httpd_ssl_request.log\r\n\r\n# Service och support\r\n\r\nService and support on ETP is regulated in maintenance contract with ES Solutions AB. A case is registered on the support portal http://projects.essolutions.se\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}