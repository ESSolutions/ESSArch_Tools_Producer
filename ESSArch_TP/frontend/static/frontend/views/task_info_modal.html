<!--
    ESSArch is an open source archiving and digital preservation system

    ESSArch Tools for Producer (ETP)
    Copyright (C) 2005-2017 ES Solutions AB

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.

    Contact information:
    Web - http://www.essolutions.se
    Email - essarch@essolutions.se
-->

<div class="enter-profile-name">
    <h3 class="modal-title" id="modal-title" style="margin: 5px;">{{('TASKREPORTFOR' | translate)+ ' ' +currentStepTask.name}}</h3>
</div>
<div class="modal-body" id="modal-body">
    <div class="step-task-info">
        <b style="margin: 5px; white-space: nowrap;">{{'STATUS' | translate}}:</b>
        <div ng-if="currentStepTask.status == 'SUCCESS'" class="step-state-success"><b>{{'SUCCESS' | translate}}</b></div>
        <div ng-if="currentStepTask.status == 'FAILURE'" class="step-state-failure"><b>{{'FAILURE' | translate}}</b></div>
        <div ng-if="currentStepTask.status != 'SUCCESS' && currentStepTask.status !='FAILURE'" class="step-state-in-progress"><b>{{'INPROGRESS' | translate}}</b></div>
        <p style="margin: 5px;"><b>{{'STARTED' | translate}}:</b> {{currentStepTask.time_started | date:"yyyy-MM-dd HH:mm:ss"}} <b>{{'DONE' | translate}}:</b> {{currentStepTask.time_done | date:"yyyy-MM-dd HH:mm:ss"}}</p>
        <p style="margin: 5px;"><b>{{'ID' | translate}}:</b> {{currentStepTask.id}}</p>
        <br>
        <table class="table" style="margin: 5px;">
            <thead>
                <tr>
                    <td>
                    <b>{{('PARAMS' | translate)+':'}}</b>
                        <table class="table">
                            <thead>
                                <tr ng-repeat="(key, value) in currentStepTask.params">
                                    <td>{{key}}</td> <td class="param-value">{{value}}</td>
                            </thead>
                                </tr>
                        </table>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr ng-if="currentStepTask.status == 'SUCCESS'">
                    <td><b>{{('RESULT' | translate)+':'}}</b>
                        {{currentStepTask.result}}
                    </td>
                </tr>
                <tr ng-if="currentStepTask.status == 'FAILURE'">
                    <td><b>{{('EXCEPTION' | translate)+':'}}</b>
                        {{currentStepTask.exception}}
                    </td>
                </tr>
            </tbody>
        </table>
        <button ng-if="currentStepTask.status == 'FAILURE'" class="btn btn-default" ng-click="tracebackModal(currentStepTask)">{{'SEETRACEBACK' | translate}}</button>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-warning" type="button" ng-click="$ctrl.cancel()" focused="true">{{'CLOSE' | translate}}</button>
</div>

