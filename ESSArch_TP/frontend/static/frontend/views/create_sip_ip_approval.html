<head>
    <link rel="stylesheet" type"text/css" href="static/frontend/scripts/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/frontend/styles/create_sip_ip_approval.css">
    <link rel="stylesheet" type="text/css" href="static/frontend/styles/index.css">
    <!--Angular Scripts -->
    <!--App -->
    <!--Controllers-->
</head>
<body>
    <div class="content-wrapper">
        <div class="list-view">
            <table st-table="vm.displayedIps" st-skip-natural="true" st-pipe="vm.callServer" class="table table-striped">
                <thead>
                    <tr>
                        <th colspan="5">
                            <div class="search-prepare-wrapper">
                                <label for items-per-page></label>
                                <select id="items-per-page" style="margin-right: 10px;" class="form-control items-per-page" ng-model="vm.itemsPerPage" ng-options="x for x in [5,10,20,25,50]"></select>
                                <input st-search="" class="form-control" placeholder="{{'GLOBALSEARCH' | translate}}" type="text"/>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th class="clickable" st-sort="label" class="column-label">{{'LABEL' | translate}}</th>
                        <th class="clickable" st-sort="responsible" class="column-label">{{'RESPONSIBLE' | translate}}</th>
                        <th class="clickable" st-sort="date" class="column-label">{{'DATE' | translate}}</th>
                        <th class="clickable" st-sort="state" class="column-label">{{'STATE' | translate}}</th>
                        <th class="clickable" st-sort="state" class="column-label">{{'EVENTS' | translate}}</th>
                        <th class="clickable" st-sort="status" class="column-label">{{'STATUS' | translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-class="row.class" ng-repeat="row in vm.displayedIps" class="table-item">
                        <td class="clickable" ng-click="ipTableClick(row);selectIp(row)">{{row.Label}}</td>
                        <td class="clickable" ng-click="ipRowClick(row)">{{row.Responsible}}</td>
                        <td class="clickable" ng-click="ipRowClick(row)">{{row.CreateDate | date:"yyyy-MM-dd hh:mm:ss"}}</td>
                        <td class="clickable" ng-click="stateClicked(row);selectIp(row)"><a href="">{{row.State}}</a></td>
                        <td class="clickable" ng-click="eventsClick(row);selectIp(row)"><a href="">{{'EVENTS' | translate}}</a></td>
                        <td>
                            <uib-progressbar class="progress" value="row.status" type="success"><b>{{row.status}}</b></uib-progressbar>

                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="6" class="text-center">
                            <div st-template="static/frontend/views/pagination.html" st-pagination="" st-items-by-page="vm.itemsPerPage" st-displayed-pages="7"></div>
                        </td>
                    </tr>
                </tfoot>

            </table>
        </div>
        <div ng-if="statusShow || eventShow" class="events-status-wrapper">
            <div ng-include src="'static/frontend/views/event_table.html'"></div>
            <div ng-if="statusShow" class="status-view">
                <div ng-include src="'static/frontend/views/status_tree_view.html'"></div>
            </div>
        </div>
            <div ng-if="select || subSelect || edit || eventlog" class="select-sub-edit-eventlog-wrapper">
                <div ng-if="select" class="select-view">
                    <table st-table="selectCollection" st-skip-natural="true" st-safe-src="selectRowCollapse" class="table table-striped">
                        <thead>
                            <tr>
                                <th class="info-popover column-enabled"><p uib-popover="{{'ENABLEDDESC' | translate}}" popover-trigger="mouseenter" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">{{'ENABLED' | translate}}</p></th>
                                <th class="info-popover column-entity"><p uib-popover="{{'ENTITYDESC' | translate}}" popover-trigger="mouseenter" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">{{'ENTITY' | translate}}</p></th>
                                <th class="info-popover column-profile"><p uib-popover="{{'PROFILEDESC' | translate}}" popover-trigger="mouseenter" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">{{'PROFILE' | translate}}</p></th>
                                <th class="info-popover column-state"><p uib-popover="{{'STATEDESC' | translate}}" popover-trigger="mouseenter" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">{{'STATE' | translate}}</p></th>

                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>
                                    <div class="checkbox table-col">
                                        <label>
                                            <input type="checkBox" ng-disabled="true" checked="checked"></input>
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <a class="table-col"><p>{{'SUBMISSION_AGREEMENT'}}</p></a>
                                </td>
                                <td><select ng-disabled="true" class="form-control table-col" ng-model="saProfile.profile" ng-options="x as x.sa_name for x in saProfile.profiles"></select></td>
                                <td><p class="table-col">{{}}</p></td>
                                <a ng-if="saProfile.profile" ng-click="showHideAllProfiles()">{{'SHOWHIDEPROFILES' | translate}}</a>
                            </tr>

                            <tr uib-collapse="!profilesCollapse" ng-repeat="row in selectCollection">
                                <td>
                                    <div class="checkbox table-col">
                                        <label>
                                            <input type="checkBox" ng-disabled="true" checked></input>
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <a class="table-col" ng-click="profileClick(row)">{{row.profile_label}}</a>
                                </td>

                                <td><select ng-disabled="true" class="form-control table-col" ng-init="row.profile" ng-model="row.profile" ng-options="x as x.name for x in row.profiles" ng-change="changeProfile(row.profile)"></select></td>
                                <td><p class="table-col" style="background-color: red; font-size: 14px;">{{row.locked?('LOCKED' | translate):''}}</p></td>
                            </tr>
                        </tbody>
                    </table>

                </div>

                <div ng-if="subSelect" class="sub-select-view">
                    {{selectProfile.entity}}
                    <select class="sub-select-profile form-control" ng-model="subSelectProfile" ng-options="x for x in subSelectOptions"></select>
                    <select class="sub-select-agreement form-control" ng-model="subSelectProfile" ng-options="x for x in subSelectOptions"></select>
                    <select class="sub-select-nationality form-control" ng-model="subSelectProfile" ng-options="x for x in subSelectOptions"></select>
                </div>
                <div ng-if="edit" id="edit-veiw" class="edit-view" >
                    <form  novalidate>
                        <formly-form ng-disabled="true" model="vm.profileModel" fields="vm.profileFields" options="vm.options">
                        </formly-form>
                    <button class="btn btn-danger" ng-click="unlockAndRedirect()">{{'UNLOCKPROFILE' | translate}}</button>
                    </form>

                    <div class="package-dependencies">
                        <p>{{'PACKAGEDEPENDENCIES' | translate}}</p>
                    </div>
                    <div ng-include src="'static/frontend/views/validator_choices.html'"></div>
                </div>
                <div ng-if="eventlog" class="eventlog-view">
                    <form class="eventlog-form" ng-submit="createSip(ip)">
                        <div class="checkbox">
                            <label>
                                <input type="checkBox" ng-model="approvedToCreate">{{'APPROVEDTOCREATE' | translate}}</input>
                            </label>
                        </div>
                        <button type="submit" ng-disabled="!approvedToCreate" class="btn btn-info submit-button">{{'CREATESIP' | translate}}</button>
                    </form>
                </div>
            </div>
        </div>
</body>
